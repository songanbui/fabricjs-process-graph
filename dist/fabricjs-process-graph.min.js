/*! fabricjs-process-graph 18-10-2021 */

!function i(n,a,s){function r(e,t){if(!a[e]){if(!n[e]){var o="function"==typeof require&&require;if(!t&&o)return o(e,!0);if(c)return c(e,!0);throw(o=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",o}o=a[e]={exports:{}},n[e][0].call(o.exports,function(t){return r(n[e][1][t]||t)},o,o.exports,i,n,a,s)}return a[e].exports}for(var c="function"==typeof require&&require,t=0;t<s.length;t++)r(s[t]);return r}({1:[function(t,e,o){"use strict";var i=n(t("./src/Container.js")),t=n(t("./src/ProcessGraph.js"));function n(t){return t&&t.__esModule?t:{default:t}}window.pg={ProcessGraph:t.default,Container:i.default}},{"./src/Container.js":2,"./src/ProcessGraph.js":5}],2:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i,a=(i=t("./LinkableShape.js"))&&i.__esModule?i:{default:i};function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(o){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(o);return function(t,e){{if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,i?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=window,l=h.fabric,d=h._,h=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,a["default"]);var i=r(n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=new l.Rect({left:0,top:0,originX:"left",originY:"top",strokeWidth:1,stroke:"#000",fill:"#fff",rx:10,ry:10,width:250,height:150}),o=new l.IText(t.label,{left:e.width/2,top:e.height/2,fontSize:14,fontFamily:"Helvetica",textAlign:"center",originX:"center",originY:"center"}),e=new l.Group([e,o],{left:0,top:0,originX:"center",originY:"center"}),o=d.cloneDeep(d.omit(t,["canvas","shape"]));return o.canvas=t.canvas,o.shape=e,i.call(this,o)}return n}();o.default=h},{"./LinkableShape.js":4}],3:[function(t,e,o){"use strict";function i(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var f=window.fabric,n=function(){function d(t){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var e=t.id,i=t.canvas,n=t&&t.start&&t.start.x?t.start.x:0,a=t&&t.start&&t.start.y?t.start.y:0,s=t&&t.end&&t.end.x?t.end.x:0,r=t&&t.end&&t.end.y?t.end.y:0;this.id=e,this.canvas=i;var c={M:{x:n,y:a},Q:{x1:(n+s)/2,y1:(a+r)/2,x2:s,y2:r}},e=this.defaultPathOptions={fill:"",stroke:t.custom&&t.custom.path&&t.custom.path.strokeWidth?t.custom.path.stroke:"#000",strokeWidth:t.custom&&t.custom.path&&t.custom.path.strokeWidth?t.custom.path.strokeWidth:1,objectCaching:!1,selectable:!1,hasBorders:!1,hasControls:!1,lockMovementX:!0,lockMovementY:!0,perPixelTargetFind:!0},t="M ".concat(c.M.x," ").concat(c.M.y," Q ").concat(c.Q.x1,", ").concat(c.Q.y1,", ").concat(c.Q.x2,", ").concat(c.Q.y2),t=new f.Path(t,e);this.path=t;e=this.controlPoint=new f.Circle({left:c.Q.x1,top:c.Q.y1,strokeWidth:1,radius:6,fill:"#78befa",stroke:"#78befa",originX:"center",originY:"center",hasBorders:!1,hasControls:!1,selectable:!0,opacity:0});e.on("mouseover",this.onLinkMouseOver.bind(this)),e.on("mouseout",this.onLinkMouseOut.bind(this)),e.on("moving",function(){o.updatePath("control",o.controlPoint.left,o.controlPoint.top,!1)}),e.on("moved",function(){o.updatePath("control",o.controlPoint.left,o.controlPoint.top,!0)}),e.on("mousedown",function(){o.bringToFront()});t={strokeDashArray:[5,5],strokeWidth:1,stroke:"#78befa",selectable:!1,hasBorders:!1,hasControls:!1,evented:!0,opacity:0},a=this.controlLine1=new f.Line([e.left,e.top,n,a],t);a.on("mouseover",this.onLinkMouseOver.bind(this)),a.on("mouseout",this.onLinkMouseOut.bind(this));t=this.controlLine2=new f.Line([e.left,e.top,s,r],t);t.on("mouseover",this.onLinkMouseOver.bind(this)),t.on("mouseout",this.onLinkMouseOut.bind(this));t={left:c.Q.x2,top:c.Q.y2,strokeWidth:1,radius:16,fill:"#57b857",stroke:"#57b857",originX:"center",originY:"center",hasBorders:!1,hasControls:!1,selectable:!1,opacity:0};this.isValidMask=new f.Circle(t);var t={width:10,height:10,left:c.Q.x2,top:c.Q.y2,strokeWidth:1,fill:"#000",opacity:1,stroke:"#000",originX:"center",originY:"center",selectable:!0,hasBorders:!1,hasControls:!1},h=this.arrowHead=new f.Triangle(t);h.on("moving",function(){o.updatePath("to",h.left,h.top,!1),o.isValidMask.left=h.left,o.isValidMask.top=h.top,o.isValidMask.set("opacity",0);var t=i.getObjects().filter(function(t){return"anchor"===t.type});h.set("stroke","#000");for(var e=0;e<t.length;e+=1)h.intersectsWithObject(t[e])&&(o.isValidMask.set("opacity",.5),o.isValidConnection("to",t[e].shapeId,t[e].cardinal)?(o.isValidMask.set({stroke:"#57b857",fill:"#57b857"}),h.set("stroke","#5f5")):(o.isValidMask.set({stroke:"#ea4f37",fill:"#ea4f37"}),h.set("stroke","#ea4f37")))}),h.on("moved",function(){o.updatePath("to",h.left,h.top,!0),o.isValidMask.set("opacity",0);for(var t=i.getObjects().filter(function(t){return"anchor"===t.type}),e=0;e<t.length;e+=1)h.intersectsWithObject(t[e])?(o.connectLink("to",t[e].shapeId,t[e].cardinal),h.set("stroke","#000")):o.to&&t[e]===o.to.shape.anchors[o.to.anchor]&&o.disconnectLink("to")}),h.on("mousedown",function(){o.bringToFront(),o.toggleAllAnchorsOpacity(1),h.on("mouseup",function(){o.toggleAllAnchorsOpacity(0)})});var c={width:10,height:10,left:c.M.x,top:c.M.y,strokeWidth:1,fill:"#fff",opacity:1,stroke:"#000",originX:"center",originY:"center",selectable:!0,hasBorders:!1,hasControls:!1},l=this.arrowTail=new f.Rect(c);l.on("moving",function(){o.updatePath("from",l.left,l.top,!1),o.isValidMask.left=l.left,o.isValidMask.top=l.top,o.isValidMask.set("opacity",0);var t=i.getObjects().filter(function(t){return"anchor"===t.type});l.set("stroke","#000");for(var e=0;e<t.length;e+=1)l.intersectsWithObject(t[e])&&(o.isValidMask.set("opacity",.5),o.isValidConnection("from",t[e].shapeId,t[e].cardinal)?(o.isValidMask.set({stroke:"#57b857",fill:"#57b857"}),l.set("stroke","#5f5")):(o.isValidMask.set({stroke:"#ea4f37",fill:"#ea4f37"}),l.set("stroke","#f55")))}),l.on("moved",function(){o.updatePath("from",l.left,l.top,!0),o.isValidMask.set("opacity",0);for(var t=i.getObjects().filter(function(t){return"anchor"===t.type}),e=0;e<t.length;e+=1)l.intersectsWithObject(t[e])?(o.connectLink("from",t[e].shapeId,t[e].cardinal),l.set("stroke","#000")):o.from&&t[e]===o.from.shape.anchors[o.from.anchor]&&o.disconnectLink("from")}),l.on("mousedown",function(){o.bringToFront(),o.toggleAllAnchorsOpacity(1),l.on("mouseup",function(){o.toggleAllAnchorsOpacity(0)})})}var t,e,o;return t=d,(e=[{key:"inject",value:function(){var t=this.canvas,e=this.path,o=this.controlPoint,i=this.controlLine1,n=this.controlLine2,a=this.arrowHead,s=this.arrowTail,r=this.isValidMask;return t.add(o),t.add(i),t.add(n),t.add(r),t.add(a),t.add(s),t.add(e),this.updatePath("from",e.path[0][1],e.path[0][2],!0),this.updatePath("to",e.path[1][3],e.path[1][4],!0),this.updatePath("control",e.path[1][1],e.path[1][2],!0),this}},{key:"connectLink",value:function(t,e,o){var i,n=this;this.isValidConnection(t,e,o)&&(i=this.canvas.getObjects().find(function(t){return t.id===e}),this.disconnectLink(t),this[t]={shape:i,anchor:o,handlers:{onAnchorPositionModifying:function(){n.updatePath(t,i.anchors[o].left,i.anchors[o].top,!1)},onAnchorPositionModified:function(){n.updatePath(t,i.anchors[o].left,i.anchors[o].top,!0)}}},i.anchors[o].opacity=0,i.anchors[o].on("pg:position:modifying",this[t].handlers.onAnchorPositionModifying),i.anchors[o].on("pg:position:modified",this[t].handlers.onAnchorPositionModified),this.updatePath(t,i.anchors[o].left,i.anchors[o].top,!0,!1))}},{key:"disconnectLink",value:function(t){this[t]&&(this[t].shape.anchors[this[t].anchor].off("pg:position:modifying",this[t].handlers.onAnchorPositionModifying),this[t].shape.anchors[this[t].anchor].off("pg:position:modified",this[t].handlers.onAnchorPositionModified),delete this[t])}},{key:"resetCurvature",value:function(){var t=this.controlPoint,e=this.path;t.left=(e.path[0][1]+e.path[1][3])/2,t.top=(e.path[0][2]+e.path[1][4])/2,t.fire("moved")}},{key:"bringToFront",value:function(){var t=this.canvas,e=this.path,o=this.controlPoint,i=this.arrowHead,n=this.arrowTail;t.bringToFront(e),t.bringToFront(o),t.bringToFront(i),t.bringToFront(n)}},{key:"updatePath",value:function(t,e,o,i,n){o={M:{x:"from"===t?e:this.path.path[0][1],y:"from"===t?o:this.path.path[0][2]},Q:{x1:"control"===t?e:this.path.path[1][1],y1:"control"===t?o:this.path.path[1][2],x2:"to"===t?e:this.path.path[1][3],y2:"to"===t?o:this.path.path[1][4]}};i?(i="M ".concat(o.M.x," ").concat(o.M.y," Q ").concat(o.Q.x1,", ").concat(o.Q.y1,", ").concat(o.Q.x2,", ").concat(o.Q.y2),i=new f.Path(i,this.defaultPathOptions),this.canvas.remove(this.path),this.canvas.add(i),i.on("mouseover",this.onLinkMouseOver.bind(this)),i.on("mouseout",this.onLinkMouseOut.bind(this)),i.on("mousedown",this.bringToFront.bind(this)),this.path=i):this.path.set("path",[["M",o.M.x,o.M.y],["Q",o.Q.x1,o.Q.y1,o.Q.x2,o.Q.y2]]),this.controlLine1.set({x1:this.controlPoint.left,y1:this.controlPoint.top,x2:this.path.path[0][1],y2:this.path.path[0][2]}),this.controlLine2.set({x1:this.controlPoint.left,y1:this.controlPoint.top,x2:this.path.path[1][3],y2:this.path.path[1][4]});o=180*Math.atan2(this.path.path[1][4]-this.path.path[1][2],this.path.path[1][3]-this.path.path[1][1])/Math.PI;this.arrowHead.angle=90+o,this.arrowHead.left=this.path.path[1][3],this.arrowHead.top=this.path.path[1][4],this.arrowHead.setCoords(),this.arrowTail.left=this.path.path[0][1],this.arrowTail.top=this.path.path[0][2],this.arrowTail.setCoords(),this.bringToFront(),n&&this.resetCurvature()}},{key:"isValidConnection",value:function(t,e,o){var i=this.canvas.getObjects().find(function(t){return t.id===e});if("from"===t){if(this.from&&this.from.shape&&this.from.shape.id===i.id&&this.from.cardinal===o)return!1;if(this.to&&this.to.shape&&this.to.shape.id===i.id)return!1}else if("to"===t){if(this.to&&this.to.shape&&this.to.shape.id===i.id&&this.to.cardinal===o)return!1;if(this.from&&this.from.shape&&this.from.shape.id===i.id)return!1}return!0}},{key:"toggleAllAnchorsOpacity",value:function(t){for(var e=this.canvas.getObjects().filter(function(t){return"anchor"===t.type}),o=0;o<e.length;o+=1)e[o].toggleOpacity(t)}},{key:"onLinkMouseOver",value:function(){this.controlPoint.toggleOpacity(1),this.controlLine1.toggleOpacity(1),this.controlLine2.toggleOpacity(1)}},{key:"onLinkMouseOut",value:function(){this.controlPoint.toggleOpacity(0),this.controlLine1.toggleOpacity(0),this.controlLine2.toggleOpacity(0)}}])&&i(t.prototype,e),o&&i(t,o),d}();o.default=n},{}],4:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i,r=(i=t("./Link.js"))&&i.__esModule?i:{default:i};function n(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=window.fabric,a=function(){function h(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);var o=t.id,i=t.canvas,n=t.shape,a=t.left,s=t.top,r=t.angle;this.id=o,this.canvas=i,this.shape=new l.Group([n],{left:a,top:s,hasBorders:!0,hasControls:!0,originX:"left",originY:"top",id:o,angle:r||0}),this.shape.type="linkableShape";var c=this.makeAnchorPoint("east"),t=this.makeAnchorPoint("west"),i=this.makeAnchorPoint("north"),n=this.makeAnchorPoint("south"),a=this.makeAnchorPoint("northeast"),s=this.makeAnchorPoint("northwest"),o=this.makeAnchorPoint("southeast"),r=this.makeAnchorPoint("southwest");this.anchors=this.shape.anchors={east:c,west:t,north:i,south:n,northeast:a,northwest:s,southeast:o,southwest:r},this.shape.on("mouseover",function(){e.toggleAnchorsOpacity(1)}),this.shape.on("mouseout",function(){e.toggleAnchorsOpacity(0)}),this.shape.on("moving",function(){e.refreshAnchorsPosition(!1)}),this.shape.on("moved",function(){e.refreshAnchorsPosition(!0)}),this.shape.on("rotating",function(){e.refreshAnchorsPosition(!1)}),this.shape.on("rotated",function(){e.refreshAnchorsPosition(!0)}),this.shape.on("scaling",function(){e.refreshAnchorsPosition(!1)}),this.shape.on("scaled",function(){e.refreshAnchorsPosition(!0)})}var t,e,o;return t=h,(e=[{key:"inject",value:function(){var t=this.canvas,e=this.shape,o=this.anchors;return t.add(e),t.add(o.east),t.bringForward(o.east,!0),t.add(o.west),t.bringForward(o.west,!0),t.add(o.north),t.bringForward(o.north,!0),t.add(o.south),t.bringForward(o.south,!0),t.add(o.northeast),t.bringForward(o.northeast,!0),t.add(o.northwest),t.bringForward(o.northwest,!0),t.add(o.southeast),t.bringForward(o.southeast,!0),t.add(o.southwest),t.bringForward(o.southwest,!0),this.refreshAnchorsPosition(!0),this}},{key:"refreshAnchorsPosition",value:function(t){this.setAnchorPositionRelativeToRectangle("east",t),this.setAnchorPositionRelativeToRectangle("west",this.shape,t),this.setAnchorPositionRelativeToRectangle("south",this.shape,t),this.setAnchorPositionRelativeToRectangle("north",this.shape,t),this.setAnchorPositionRelativeToRectangle("northeast",this.shape,t),this.setAnchorPositionRelativeToRectangle("northwest",this.shape,t),this.setAnchorPositionRelativeToRectangle("southeast",this.shape,t),this.setAnchorPositionRelativeToRectangle("southwest",this.shape,t)}},{key:"setAnchorPositionRelativeToRectangle",value:function(t,e){var o,i,n=this.shape,a=this.anchors[t];switch(t){case"east":o=(n.aCoords.tr.x+n.aCoords.br.x)/2,i=(n.aCoords.tr.y+n.aCoords.br.y)/2;break;case"west":o=(n.aCoords.tl.x+n.aCoords.bl.x)/2,i=(n.aCoords.tl.y+n.aCoords.bl.y)/2;break;case"north":o=(n.aCoords.tl.x+n.aCoords.tr.x)/2,i=(n.aCoords.tl.y+n.aCoords.tr.y)/2;break;case"south":o=(n.aCoords.bl.x+n.aCoords.br.x)/2,i=(n.aCoords.bl.y+n.aCoords.br.y)/2;break;case"northeast":o=n.aCoords.tl.x,i=n.aCoords.tl.y;break;case"northwest":o=n.aCoords.tr.x,i=n.aCoords.tr.y;break;case"southeast":o=n.aCoords.bl.x,i=n.aCoords.bl.y;break;default:o=n.aCoords.br.x,i=n.aCoords.br.y}a.left=o,a.top=i,a.fire(e?"pg:position:modified":"pg:position:modifying")}},{key:"toggleAnchorsOpacity",value:function(t){var e=this.anchors,o=e.east,i=e.west,n=e.north,a=e.south,s=e.northeast,r=e.southeast,c=e.northwest,e=e.southwest;o.toggleOpacity(t),i.toggleOpacity(t),n.toggleOpacity(t),a.toggleOpacity(t),s.toggleOpacity(t),r.toggleOpacity(t),c.toggleOpacity(t),e.toggleOpacity(t)}},{key:"makeAnchorPoint",value:function(t){var e,o,n=this,i=this.shape,a=this.id;switch(t){case"east":e=(i.aCoords.tr.x+i.aCoords.br.x)/2,o=(i.aCoords.tr.y+i.aCoords.br.y)/2;break;case"west":e=(i.aCoords.tl.x+i.aCoords.bl.x)/2,o=(i.aCoords.tl.y+i.aCoords.bl.y)/2;break;case"north":e=(i.aCoords.tl.x+i.aCoords.tr.x)/2,o=(i.aCoords.tl.y+i.aCoords.tr.y)/2;break;case"south":e=(i.aCoords.bl.x+i.aCoords.br.x)/2,o=(i.aCoords.bl.y+i.aCoords.br.y)/2;break;case"northeast":e=i.aCoords.tl.x,o=i.aCoords.tl.y;break;case"northwest":e=i.aCoords.tr.x,o=i.aCoords.tr.y;break;case"southeast":e=i.aCoords.bl.x,o=i.aCoords.bl.y;break;default:e=i.aCoords.br.x,o=i.aCoords.br.y}var s=new l.Circle({left:e,top:o,strokeWidth:2,radius:6,fill:"#78befa",stroke:"#78befa",originX:"center",originY:"center",hasBorders:!1,hasControls:!1,selectable:!1,opacity:0,id:"".concat(a,"_").concat(t)});return s.type="anchor",s.shapeId=a,s.cardinal=t,s.on("mouseover",function(){s.toggleOpacity(1)}),s.on("mouseout",function(){s.toggleOpacity(0)}),s.on("mousedblclick",function(){var t=n.canvas,e=new r.default({canvas:t,start:{x:s.left,y:s.top},end:{x:s.left,y:s.top}});e.inject(t),e.connectLink("from",s.shapeId,s.cardinal),e.arrowHead.fire("mousedown");function o(t){e.arrowHead.left=t.pointer.x,e.arrowHead.top=t.pointer.y,e.arrowHead.fire("moving")}t.on("mouse:move",o);function i(){e.arrowHead.fire("moved"),e.arrowHead.fire("mouseup"),t.off("mouse:move",o),t.off("mouse:up",i),e.resetCurvature()}t.on("mouse:up",i)}),s}}])&&n(t.prototype,e),o&&n(t,o),h}();o.default=a},{"./Link.js":3}],5:[function(t,e,o){"use strict";function n(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=window.fabric,i=function(){function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.handlers={grid:{}};var e=this.canvas=t.canvas||new a.Canvas(t.canvasOpts.el,t.canvasOpts.options);e.set("preserveObjectStacking",!0),"number"==typeof t.grid&&this.setGrid({grid:t.grid}),a.Object.prototype.toggleOpacity=function(t,e){this.animate("opacity",t,{duration:void 0!==e?e:300,onChange:this.canvas.renderAll.bind(this.canvas)})},e.calcOffset();t=function(){var t=e.getActiveObject();"activeSelection"!==t.type||1<(t=t.getObjects()).length&&(t=t.filter(function(t){return"linkableShape"===t.type}),e._discardActiveObject(),t=new a.ActiveSelection(t,{canvas:e}),e._setActiveObject(t))};e.on({"selection:created":t,"selection:updated":t})}var t,e,i;return t=o,(e=[{key:"setGrid",value:function(t){var f=this;if("number"!=typeof t.grid||t.grid<0)throw new Error('Invalid argument "grid" in ProcessGrap#setGrid. (required: Number > 0)');this.grid=t.grid;var o=this.canvas,e='<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">         <defs>             <pattern id="smallGrid" width="'.concat(this.grid,'" height="').concat(this.grid,'" patternUnits="userSpaceOnUse">                 <path d="M ').concat(this.grid," 0 L 0 0 0 ").concat(this.grid,'" fill="none" stroke="gray" stroke-width="0.5" />             </pattern>             <pattern id="grid" width="').concat(5*this.grid,'" height="').concat(5*this.grid,'" patternUnits="userSpaceOnUse">                 <rect width="').concat(5*this.grid,'" height="').concat(5*this.grid,'" fill="url(#smallGrid)" />                 <path d="M ').concat(5*this.grid," 0 L 0 0 0 ").concat(5*this.grid,'" fill="none" stroke="gray" stroke-width="1" />             </pattern>         </defs>         <rect width="100%" height="100%" fill="url(#grid)" />     </svg>'),t=window.URL||window.webkitURL||window,e=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),e=t.createObjectURL(e);a.util.loadImage(e,function(t){var e=new a.Rect({width:o.width,height:o.height,evented:!1,selectable:!1});e.fill=new a.Pattern({source:t},function(){e.dirty=!0,o.requestRenderAll()}),(e.canvas=o).set("backgroundImage",e),o.off(f.handlers.grid),f.handlers.grid={"object:moving":function(t){var e=f.grid;"linkableShape"===t.target.type&&t.target.set({left:Math.round(t.target.left/e)*e,top:Math.round(t.target.top/e)*e})},"object:scaling":function(t){var e=f.grid,o=t.target;if("linkableShape"===o.type){var i=o.width*o.scaleX,n=o.height*o.scaleY,a={top:Math.round(o.top/e)*e,left:Math.round(o.left/e)*e,bottom:Math.round((o.top+n)/e)*e,right:Math.round((o.left+i)/e)*e},s=e,r=Math.abs(a.top-o.top),c=Math.abs(a.left-o.left),h=Math.abs(a.bottom-o.top-n),l=Math.abs(a.right-o.left-i),d={scaleX:o.scaleX,scaleY:o.scaleY,top:o.top,left:o.left};switch(o.__corner){case"tl":c<r&&c<s?(d.scaleX=(i-(a.left-o.left))/o.width,d.scaleY=d.scaleX/o.scaleX*o.scaleY,d.top=o.top+(n-o.height*d.scaleY),d.left=a.left):r<s&&(d.scaleY=(n-(a.top-o.top))/o.height,d.scaleX=d.scaleY/o.scaleY*o.scaleX,d.left+=i-o.width*d.scaleX,d.top=a.top);break;case"mt":r<s&&(d.scaleY=(n-(a.top-o.top))/o.height,d.top=a.top);break;case"tr":l<r&&l<s?(d.scaleX=(a.right-o.left)/o.width,d.scaleY=d.scaleX/o.scaleX*o.scaleY,d.top=o.top+(n-o.height*d.scaleY)):r<s&&(d.scaleY=(n-(a.top-o.top))/o.height,d.scaleX=d.scaleY/o.scaleY*o.scaleX,d.top=a.top);break;case"ml":c<s&&(d.scaleX=(i-(a.left-o.left))/o.width,d.left=a.left);break;case"mr":l<s&&(d.scaleX=(a.right-o.left)/o.width);break;case"bl":c<h&&c<s?(d.scaleX=(i-(a.left-o.left))/o.width,d.scaleY=d.scaleX/o.scaleX*o.scaleY,d.left=a.left):h<s&&(d.scaleY=(a.bottom-o.top)/o.height,d.scaleX=d.scaleY/o.scaleY*o.scaleX,d.left+=i-o.width*d.scaleX);break;case"mb":h<s&&(d.scaleY=(a.bottom-o.top)/o.height);break;default:l<h&&l<s?(d.scaleX=(a.right-o.left)/o.width,d.scaleY=d.scaleX/o.scaleX*o.scaleY):h<s&&(d.scaleY=(a.bottom-o.top)/o.height,d.scaleX=d.scaleY/o.scaleY*o.scaleX)}o.set(d)}}},0<f.grid&&o.on(f.handlers.grid)})}}])&&n(t.prototype,e),i&&n(t,i),o}();o.default=i},{}]},{},[1]);
//# sourceMappingURL=fabricjs-process-graph.min.js.map